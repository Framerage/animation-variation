(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{5601:function(e,a,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalog",function(){return i(2870)}])},2870:function(e,a,i){"use strict";i.r(a),i.d(a,{__N_SSP:function(){return h},default:function(){return p}});var n=i(5893),t=i(7294),s=i(4010),l=i(6154),r=i(4184),o=i.n(r),c=i(3341),d=i.n(c),_=i(9473),m=i(6004);let v=e=>e[0].toUpperCase()+e.slice(1);var u=i(1874);let w=e=>{var a,i,r,c;let{catalog:w}=e,h=(0,_.I0)(),p=(0,_.v9)(m.bh),[g,C]=(0,t.useState)(0),[f,k]=(0,t.useState)(0),[N,x]=(0,t.useState)(""),[j,I]=(0,t.useState)(""),E=p&&(null===(a=p[g])||void 0===a?void 0:a.isLiked)?"red":"white";(0,t.useEffect)(()=>{w&&h((0,m.nP)(w))},[w]),(0,t.useEffect)(()=>{document.documentElement.style.setProperty("--smallheartbg","".concat(E))},[g]);let b=e=>C(e),A=()=>{if((!p||!p[g].isLiked)&&(document.documentElement.style.setProperty("--smallheartbg","red"),p)){let e=p.map(e=>Number(e.id)===g+1?{...e,isLiked:!0,likes:e.likes+1}:e);h((0,m.nP)(e)),y(g+1,"likes",p[g].likes+1)}},y=async(e,a,i)=>{await l.Z.put("https://640adea265d3a01f98095963.mockapi.io/catalog/".concat(e),{[a]:i})},P=async()=>{let e=window.prompt("Введите пароль");if("9573"===e){let e=window.prompt("Название компонента"),a=await l.Z.post("https://640adea265d3a01f98095963.mockapi.io/catalog",{name:e});y(a.data.id,"likes",0),p&&h((0,m.nP)([...p,{...a.data,likes:0}]))}else window.alert("Не угадал")},S=()=>{p&&0!==f&&k(f-1),p&&f!==Math.round(p.length/8)&&k(f+1)},F=(e,a)=>{if(e.preventDefault(),N.length<4){I("Не менее 4-х символов");return}if(p){let e=p.map(e=>Number(e.id)===g+1?{...e,reviews:[...p[g].reviews,N]}:e);I(""),h((0,m.nP)(e)),y(a,"reviews",[...p[g].reviews,N]),x("")}};return(0,n.jsx)("div",{className:d().catalogContainer,children:(0,n.jsxs)("div",{className:d().catalogMenu,children:[(0,n.jsx)("h2",{className:d().catalogHeader,children:"Find your favorite animation"}),(0,n.jsxs)("div",{className:d().menuContainer,children:[(0,n.jsx)("div",{className:o()(d().menuArrow,{[d().disabledArrow]:0===f}),onClick:S,children:"<"}),(0,n.jsxs)("div",{className:d().menuItems,children:[p&&p.length&&p.slice(8*f,(f+1)*8).map((e,a)=>(0,n.jsx)("div",{className:o()(d().menuItem,{[d().choosedItem]:g===a+8*f}),onClick:()=>b(a+8*f),children:e.name},e.name+":"+a)),(0,n.jsx)("div",{className:o()(d().menuItem),onClick:P,children:"+"})]}),(0,n.jsx)("div",{className:o()(d().menuArrow,{[d().disabledArrow]:p&&f===Math.round(p.length/8)}),onClick:S,children:">"})]}),(0,n.jsxs)("div",{className:d().previewWindow,children:[(0,n.jsxs)("div",{className:d().previewInfo,children:[(0,n.jsxs)("span",{children:["Отзывов:\xa0",p?null===(i=p[g])||void 0===i?void 0:i.reviews.length:0]}),(0,n.jsx)("span",{children:(null===(r=s.iA[g])||void 0===r?void 0:r.name)||"Soon add..."}),(0,n.jsxs)("span",{className:d().likesContainer,children:[(0,n.jsx)("div",{style:{transform:"scale(0.2)"},onClick:A,children:(0,n.jsx)(u.Z,{})}),":\xa0",p?p[g].likes:0]}),(0,n.jsxs)("div",{className:d().itemReviews,children:[(0,n.jsx)("div",{className:d().reviewsBlock,children:p&&p[g].reviews.map((e,a)=>(0,n.jsx)("span",{className:d().review,children:v(e)},e+":"+a))}),(0,n.jsx)("div",{className:d().reviewsError,children:j}),(0,n.jsxs)("form",{className:d().reviewForm,onSubmit:e=>{F(e,g+1)},children:[(0,n.jsx)("textarea",{title:"Не менее 4-х символов",className:d().reviewsInput,placeholder:"Напишите отзыв",value:N,onChange:e=>x(e.target.value)}),(0,n.jsx)("button",{className:d().reviewBtn,children:"Ok"})]})]})]}),(0,n.jsx)("div",{className:d().previewItem,children:(null===(c=s.iA[g])||void 0===c?void 0:c.component)||"Soon add..."})]})]})})};var h=!0,p=w},3341:function(e){e.exports={catalogContainer:"Catalog_catalogContainer__1j0Hm",catalogMenu:"Catalog_catalogMenu__MuHRn",catalogHeader:"Catalog_catalogHeader__czHup",menuContainer:"Catalog_menuContainer__HpDNS",menuArrow:"Catalog_menuArrow__GQD8P",disabledArrow:"Catalog_disabledArrow__3yW83",menuItems:"Catalog_menuItems__FZAOl",menuItem:"Catalog_menuItem__GMjee",choosedItem:"Catalog_choosedItem__yqvOE",choosed:"Catalog_choosed__FnEL_",previewWindow:"Catalog_previewWindow__2_r7Q",previewInfo:"Catalog_previewInfo__uXEXT",itemReviews:"Catalog_itemReviews__kh5RT",reviewsBlock:"Catalog_reviewsBlock__zKyjp",review:"Catalog_review__Jy8fV",reviewsInput:"Catalog_reviewsInput__PvUR5",previewItem:"Catalog_previewItem__11aLf",likesContainer:"Catalog_likesContainer__LdARw",likesIcon:"Catalog_likesIcon__FiFAE",reviewForm:"Catalog_reviewForm___LiGJ",reviewBtn:"Catalog_reviewBtn__YzZJL",reviewsError:"Catalog_reviewsError__8U_af"}}},function(e){e.O(0,[154,774,888,179],function(){return e(e.s=5601)}),_N_E=e.O()}]);